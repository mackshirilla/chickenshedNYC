"use strict";(()=>{var d=document.getElementById("firstNameInput"),h=document.getElementById("firstNameError");function S(){return d.hasAttribute("required")&&d.value.trim()===""?(h.textContent="First name required",h.style.display="block",d.classList.add("error"),!1):(h.textContent="",h.style.display="none",d.classList.remove("error"),!0)}d&&d.addEventListener("blur",S);var u=document.getElementById("lastNameInput"),b=document.getElementById("lastNameError");function w(){return u.hasAttribute("required")&&u.value.trim()===""?(b.textContent="Last name required",b.style.display="block",u.classList.add("error"),!1):(b.textContent="",b.style.display="none",u.classList.remove("error"),!0)}u&&u.addEventListener("blur",w);var n=document.getElementById("emailInput"),i=document.getElementById("emailError");function R(){let t=/^\S+@\S+\.\S+$/;return n.hasAttribute("required")&&n.value.trim()===""?(i.textContent="Email is required",i.style.display="block",n.classList.add("error"),!1):n.value.trim()!==""&&!t.test(n.value)?(i.textContent="Please enter a valid email",i.style.display="block",n.classList.add("error"),!1):(i.textContent="",i.style.display="none",n.classList.remove("error"),!0)}n&&n.addEventListener("blur",R);var r=document.getElementById("phoneInput"),l=document.getElementById("phoneError");function $(t){let e=t.replace(/\D/g,"");return e.length===0?"":e.length<4?`(${e}`:e.length<7?`(${e.slice(0,3)}) ${e.slice(3)}`:`(${e.slice(0,3)}) ${e.slice(3,6)}-${e.slice(6,10)}`}function G(){let t=/^\D*(\d{3})\D*\D*(\d{3})\D*(\d{4})\D*$/;return r.required&&r.value.trim()===""?(l.textContent="Phone is required",l.style.display="block",r.classList.add("error"),!1):r.value.trim()!==""&&!t.test(r.value)?(l.textContent="Please enter a valid phone number",l.style.display="block",r.classList.add("error"),!1):(r.value=$(r.value),l.textContent="",l.style.display="none",r.classList.remove("error"),!0)}r&&r.addEventListener("input",t=>{let e=t.target;e.value=$(e.value),G()});var c=document.getElementById("dobInput"),x=document.getElementById("dobError");function j(){return c.hasAttribute("required")&&c.value.trim()===""?(x.textContent="Date of Birth is required",x.style.display="block",c.classList.add("error"),!1):(x.textContent="",x.style.display="none",c.classList.remove("error"),!0)}c&&c.addEventListener("blur",j);var m=document.getElementById("genderInput"),T=document.getElementById("genderError");function J(){return m.hasAttribute("required")&&m.value.trim()===""?(T.textContent="Gender is required",T.style.display="block",m.classList.add("error"),!1):(T.textContent="",T.style.display="none",m.classList.remove("error"),!0)}m&&m.addEventListener("blur",J);var y=document.getElementById("schoolInput"),B=document.getElementById("schoolError");function z(){return y.hasAttribute("required")&&y.value.trim()===""?(B.textContent="School name is required",B.style.display="block",y.classList.add("error"),!1):(B.textContent="",B.style.display="none",y.classList.remove("error"),!0)}y&&y.addEventListener("blur",z);var p=document.getElementById("gradeInput"),H=document.getElementById("gradeError");function Q(){return p.hasAttribute("required")&&p.value.trim()==="N/A"?(H.textContent="Grade is required",H.style.display="block",p.classList.add("error"),!1):(H.textContent="",H.style.display="none",p.classList.remove("error"),!0)}p&&p.addEventListener("blur",Q);var k=document.getElementById("ethnicityInput"),a=document.getElementById("ethnicityError");function U(){return k.hasAttribute("required")&&k.value.trim()===""?(a.textContent="Ethnicity is required",a.style.display="block",k.classList.add("error"),!1):(a.textContent="",a.style.display="none",a.classList.remove("error"),!0)}a&&k.addEventListener("blur",U);var E=document.getElementById("healthInput"),C=document.getElementById("healthError");function W(){return E.hasAttribute("required")&&E.value.trim()===""?(C.textContent="This field is required",C.style.display="block",E.classList.add("error"),!1):(C.textContent="",C.style.display="none",E.classList.remove("error"),!0)}E&&E.addEventListener("blur",W);var f=document.getElementById("emergencyContact"),M=document.getElementById("emergencyError");function K(){return f.hasAttribute("required")&&f.value.trim()===""?(M.textContent="This field is required",M.style.display="block",f.classList.add("error"),!1):(M.textContent="",M.style.display="none",f.classList.remove("error"),!0)}f&&f.addEventListener("blur",K);var v=document.getElementById("dismissal"),q=document.getElementById("dismissalError");function V(){return v.hasAttribute("required")&&v.value.trim()===""?(q.textContent="This field is required",q.style.display="block",v.classList.add("error"),!1):(q.textContent="",q.style.display="none",v.classList.remove("error"),!0)}v&&v.addEventListener("blur",V);var s=document.getElementById("additionalEmail"),o=document.getElementById("additionalEmailError");function X(){let t=/^\S+@\S+\.\S+$/;return s.hasAttribute("required")&&s.value.trim()===""?(o.textContent="Email is required",o.style.display="block",s.classList.add("error"),!1):s.value.trim()!==""&&!t.test(s.value)?(o.textContent="Please enter a valid email",o.style.display="block",s.classList.add("error"),!1):(o.textContent="",o.style.display="none",s.classList.remove("error"),!0)}s&&s.addEventListener("blur",X);var I=document.getElementById("interestInput"),D=document.getElementById("interestError");function Y(){return I.hasAttribute("required")&&I.value.trim()===""?(D.textContent="This field is required",D.style.display="block",I.classList.add("error"),!1):(D.textContent="",D.style.display="none",I.classList.remove("error"),!0)}I&&I.addEventListener("blur",Y);var ee=document.getElementById("bloodType"),te=document.getElementById("bloodTypeError");async function P(){let t=document.getElementById("firstNameInput"),e=document.getElementById("lastNameInput"),O=document.getElementById("emailInput"),A=document.getElementById("submitAccountError"),N=document.getElementById("loadingAccountAnimation");N.style.display="block",A.style.display="none";try{let L=await fetch("https://xszy-vp96-kdkh.n7c.xano.io/api:WyQO-hFi/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:t.value,lastName:e.value,email:O.value})});if(N.style.display="none",L.ok){let g=await L.json();localStorage.setItem("profile",JSON.stringify(g.userCreated)),localStorage.setItem("authToken",g.authToken),localStorage.setItem("role",g.role);let F=JSON.parse(localStorage.getItem("profile")||"{}"),{role:_}=F;window.location.href.includes("/sessions")?(window.location.href="/create-account/add-student-profile",localStorage.setItem("redirectURL",window.location.href)):window.location.href="/create-account/account-details"}else{let g=await L.json();A.textContent=g.message||"An error occurred",A.style.display="block"}}catch(L){console.error(L)}finally{N.style.display="none"}}var Z=document.getElementById("submitAccountButton");Z.addEventListener("click",t=>{if(!S()||!w()||!R()){t.preventDefault();let e=document.getElementById("submitError");e.style.display="block",e.textContent="Please make sure you have entered all fields correctly."}else t.preventDefault(),P()});})();
