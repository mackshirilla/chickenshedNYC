"use strict";(()=>{async function n(){let o=document.getElementById("verificationError"),a=new URLSearchParams(window.location.search).get("magic_token");if(!a){o&&(o.style.display="block",o.textContent="Uh oh! No Magic Token found. Please log in again.");return}try{let t=await fetch("https://x8ki-letl-twmt.n7.xano.io/api:WyQO-hFi/auth/magic-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({magic_token:a})});if(t.ok){let e=await t.json();console.log(e),localStorage.setItem("authToken",e.authToken),localStorage.setItem("profile",JSON.stringify(e.profile[0])),localStorage.setItem("role",e.role),e.role==="guardian"?window.location.href="/create-account/step-2":window.location.href="/student-dashboard"}else{let e=await t.json();o&&(o.style.display="block",o.textContent=e.message)}}catch(t){console.error(t)}}n();})();
