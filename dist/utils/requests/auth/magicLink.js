"use strict";(()=>{async function a(){let e=document.getElementById("verificationError"),n=new URLSearchParams(window.location.search).get("magic_token");if(!n){e&&(e.style.display="block",e.textContent="Uh oh! No Magic Token found. Please log in again.");return}try{let t=await fetch("https://x8ki-letl-twmt.n7.xano.io/api:WyQO-hFi/auth/magic-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({magic_token:n})});if(t.ok){let o=await t.json();console.log(o),localStorage.setItem("authToken",o.authToken),localStorage.setItem("profile",JSON.stringify(o.profile[0])),localStorage.setItem("role",o.role),window.location.href="/create-account/step-2"}else{let o=await t.json();e&&(e.style.display="block",e.textContent=o.message)}}catch(t){console.error(t)}}a();})();
