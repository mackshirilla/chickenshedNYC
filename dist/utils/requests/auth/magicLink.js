"use strict";(()=>{async function n(){let e=document.getElementById("verificationError"),a=new URLSearchParams(window.location.search).get("magic_token");if(!a){e&&(e.style.display="block",e.textContent="Uh oh! No Magic Token found. Please log in again.");return}try{let t=await fetch("https://xszy-vp96-kdkh.n7c.xano.io/api:WyQO-hFi/auth/magic-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({magic_token:a})});if(t.ok){let o=await t.json();console.log(o),localStorage.setItem("authToken",o.authToken),localStorage.setItem("profile",JSON.stringify(o.profile[0])),localStorage.setItem("role",o.role),o.role==="guardian"?window.location.href="/create-account/step-2":window.location.href="/student-dashboard"}else{let o=await t.json();e&&(e.style.display="block",e.textContent=o.message)}}catch(t){console.error(t)}}n();})();
