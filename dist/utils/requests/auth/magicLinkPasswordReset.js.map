{
  "version": 3,
  "sources": ["../../../../bin/live-reload.js", "../../../../src/utils/requests/auth/magicLinkPasswordReset.ts"],
  "sourcesContent": ["new EventSource(`${SERVE_ORIGIN}/esbuild`).addEventListener('change', () => location.reload());\n", "async function magicLinkPasswordReset() {\n  const verificationError = document.getElementById('verificationError');\n  const magicToken = new URLSearchParams(window.location.search).get('magic_token');\n\n  if (!magicToken) {\n    if (verificationError) {\n      verificationError.style.display = 'block';\n      verificationError.textContent = 'Uh oh! No Magic Token found. Please log in again.';\n    }\n    return;\n  }\n\n  try {\n    const response = await fetch(\n      'https://xszy-vp96-kdkh.n7c.xano.io/api:WyQO-hFi/auth/magic-login',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ magic_token: magicToken }),\n      }\n    );\n\n    if (!response.ok) {\n      const responseData = await response.json();\n      if (verificationError) {\n        verificationError.style.display = 'block';\n        verificationError.textContent = responseData.message;\n      }\n    } else {\n      // Store authToken, profile, and role in local storage\n      const responseData = await response.json();\n      localStorage.setItem('authToken', responseData.authToken);\n      localStorage.setItem('profile', JSON.stringify(responseData.profile[0]));\n      localStorage.setItem('role', responseData.role);\n\n      // Redirect to '/reset-password' page\n      window.location.href = '/reset-password';\n    }\n  } catch (error) {\n    console.error(error);\n    if (verificationError) {\n      verificationError.style.display = 'block';\n      verificationError.textContent = 'Error processing request. Please try again.';\n    }\n  }\n}\n\n// Run magicLinkPasswordReset function on page load\nmagicLinkPasswordReset();\n"],
  "mappings": ";;;AAAA,MAAI,YAAY,GAAG,iCAAsB,EAAE,iBAAiB,UAAU,MAAM,SAAS,OAAO,CAAC;;;ACA7F,iBAAe,yBAAyB;AACtC,UAAM,oBAAoB,SAAS,eAAe,mBAAmB;AACrE,UAAM,aAAa,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAAE,IAAI,aAAa;AAEhF,QAAI,CAAC,YAAY;AACf,UAAI,mBAAmB;AACrB,0BAAkB,MAAM,UAAU;AAClC,0BAAkB,cAAc;AAAA,MAClC;AACA;AAAA,IACF;AAEA,QAAI;AACF,YAAM,WAAW,MAAM;AAAA,QACrB;AAAA,QACA;AAAA,UACE,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,UACA,MAAM,KAAK,UAAU,EAAE,aAAa,WAAW,CAAC;AAAA,QAClD;AAAA,MACF;AAEA,UAAI,CAAC,SAAS,IAAI;AAChB,cAAM,eAAe,MAAM,SAAS,KAAK;AACzC,YAAI,mBAAmB;AACrB,4BAAkB,MAAM,UAAU;AAClC,4BAAkB,cAAc,aAAa;AAAA,QAC/C;AAAA,MACF,OAAO;AAEL,cAAM,eAAe,MAAM,SAAS,KAAK;AACzC,qBAAa,QAAQ,aAAa,aAAa,SAAS;AACxD,qBAAa,QAAQ,WAAW,KAAK,UAAU,aAAa,QAAQ,CAAC,CAAC,CAAC;AACvE,qBAAa,QAAQ,QAAQ,aAAa,IAAI;AAG9C,eAAO,SAAS,OAAO;AAAA,MACzB;AAAA,IACF,SAAS,OAAP;AACA,cAAQ,MAAM,KAAK;AACnB,UAAI,mBAAmB;AACrB,0BAAkB,MAAM,UAAU;AAClC,0BAAkB,cAAc;AAAA,MAClC;AAAA,IACF;AAAA,EACF;AAGA,yBAAuB;",
  "names": []
}
